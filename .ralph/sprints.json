{"overview": "Fix issue #10273 - CLIEvent properties to be recognized as events with correct XmlDocSig 'E:' prefix. Address all reviewer feedback from PR #18584: use CompileAsEvent helper, remove redundant comments, use {caret} test pattern, add release notes. TDD approach with incremental verification.", "subtasks": [{"id": 1, "name": "Fix XmlDocSig generation", "description": "In TypedTreeOps.fs, replace the direct HasFSharpAttribute check with CompileAsEvent for clarity. The current code at line 9078 uses `HasFSharpAttribute g g.attrib_CLIEventAttribute v.Attribs` but should use `CompileAsEvent g v.Attribs` to match the pattern used elsewhere (like in IsFSharpEventProperty). This is semantically equivalent but follows reviewer feedback. Verify the change works by running the existing CLIEvent-related tests. Files: src/Compiler/TypedTree/TypedTreeOps.fs", "dod": ["Build succeeds with 0 errors", "Existing CLIEvent tests in ProjectAnalysisTests still pass (project3, project28)", "CompileAsEvent helper used instead of direct HasFSharpAttribute"]}, {"id": 2, "name": "Clean up comments", "description": "Remove the redundant comments added by previous Copilot attempt that don't add value. Per Eugene's feedback: (1) Remove '// CLIEvent properties should be considered events' and '// CLIEvent properties (ValRef case)' comments from Symbols.fs lines 1912-1913, (2) Remove '// Only add prop tag for non-event properties', '// Add event tag for all events, including CLIEvents', '// Keep clievent tag for CLIEvents' comments from Common.fs lines 308-313. Keep the code, just remove the noise comments. Files: src/Compiler/Symbols/Symbols.fs, tests/FSharp.Compiler.Service.Tests/Common.fs", "dod": ["Build succeeds with 0 errors", "All tests pass", "No redundant comments in Symbols.fs lines 1912-1913", "No redundant comments in Common.fs lines 308-313"]}, {"id": 3, "name": "Rewrite test with caret pattern", "description": "Rewrite the `CLIEvent is recognized as event` test in tests/FSharp.Compiler.Service.Tests/Symbols.fs to use the {caret} marker approach instead of manual GetSymbolUsesAtLocation coordinates. Use `Checker.getSymbolUse` with marked source like other tests in the same file (e.g., 'CLIEvent member does not produce additional property symbol' test at line 1274). The test should verify: (1) IsEvent returns true, (2) XmlDocSig starts with 'E:'. Remove any verbose comments from the test. Files: tests/FSharp.Compiler.Service.Tests/Symbols.fs", "dod": ["Build succeeds with 0 errors", "Test 'CLIEvent is recognized as event' passes", "Test uses {caret} marker pattern via Checker.getSymbolUse", "No manual line/column coordinates in the test", "No verbose explanatory comments in test body"]}, {"id": 4, "name": "Add release notes", "description": "Add release notes entry to docs/release-notes/.FSharp.Compiler.Service/11.0.0.md documenting the fix. The entry should mention that CLIEvent properties are now correctly recognized as events in the Symbol API with IsEvent=true and XmlDocSig using 'E:' prefix instead of 'P:'. Reference issue #10273 and PR #18584. Files: docs/release-notes/.FSharp.Compiler.Service/11.0.0.md", "dod": ["Release notes file contains entry for issue #10273", "Entry follows existing format with bullet point", "Entry includes link to issue and/or PR"]}, {"id": 5, "name": "Full validation and formatting", "description": "Run the complete test suite for FSharp.Compiler.Service.Tests to verify all changes work correctly together. Run dotnet fantomas formatting check. Verify all ProjectAnalysisTests (project3, project28) pass with the updated expectations. Ensure no regressions. Commands: (1) dotnet fantomas . --check (and fix if needed), (2) Run FSharp.Compiler.Service.Tests, (3) Specifically verify Symbols.fs Event module tests, ProjectAnalysisTests project3 and project28 tests pass.", "dod": ["dotnet fantomas . --check passes", "All FSharp.Compiler.Service.Tests pass", "Project3 'all symbols in signature' test passes", "Project3 'all uses of all signature symbols' test passes", "Project28 'all symbols in signature' test passes", "CLIEvent tests pass (both existing and new)"]}]}
