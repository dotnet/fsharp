<Project>

  <UsingTask TaskName="FsiTestTask" AssemblyFile="$(FSharpBuildAssemblyFile)" />

    <Target
        Name="RunFSharpScript"
        Returns=""
        DependsOnTargets="$(CoreCompileDependsOn)"
    >
      <FsiTestTask
              Condition=" '%(_CoreCompileResourceInputs.WithCulture)' != 'true' "
              CodePage="$(CodePage)"
              DefineConstants="$(DefineConstants)"
              DisabledWarnings="$(NoWarn)"
              DotnetFsiCompilerPath="$(DotnetFsiCompilerPath)"
              FsiExec="@(FsiExec)"
              LangVersion="$(LangVersion)"
              LCID="$(LCID)"
              LoadSources="@(LoadSource)"
              NoFramework="false"
              Optimize="$(Optimize)"
              OtherFlags="$(OtherFlags)"
              PreferredUILang="$(PreferredUILang)"
              ProvideCommandLineArgs="$(ProvideCommandLineArgs)"
              UseSources="@(UseSource)"
              SkipCompilerExecution="$(SkipCompilerExecution)"
              Sources="@(CompileBefore);@(Compile);@(CompileAfter)"
              Tailcalls="$(Tailcalls)"
              TargetProfile="$(TargetProfile)"
              ToolExe="$(FsiToolExe)"
              ToolPath="$(FsiToolPath)"
              TreatWarningsAsErrors="$(TreatWarningsAsErrors)"
              Utf8Output="$(Utf8Output)"
              WarningLevel="$(WarningLevel)"
              WarningsAsErrors="$(WarningsAsErrors)">
          <Output TaskParameter="CommandLineArgs" ItemName="FsiCommandLineArgs" />
          <Output TaskParameter="TextOutput" ItemName="FsiTextOutput" />
        </FsiTestTask>

      <ItemGroup>
          <_CoreCompileResourceInputs Remove="@(_CoreCompileResourceInputs)" />
      </ItemGroup>
  </Target>

</Project>
