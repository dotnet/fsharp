<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) Microsoft Corporation.  All Rights Reserved.  See License.txt in the project root for license information. -->
<Project>
  <PropertyGroup>
    <NullCheckingFeature>true</NullCheckingFeature>
    <!-- This turns off null checking in all assemblies. Otherwise it is selectively enabled in project files -->
    <!-- <CheckNulls>false</CheckNulls> -->
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)' == 'Proto'">
    <DefineConstants>BUILDING_WITH_LKG;NO_CHECKNULLS;$(DefineConstants)</DefineConstants>
  </PropertyGroup>

	<PropertyGroup Condition="'$(NullCheckingFeature)' == 'false'">
		<DefineConstants>NO_NULLCHECKING_FEATURE;$(DefineConstants)</DefineConstants>
	</PropertyGroup>

	<PropertyGroup Condition="'$(Configuration)' != 'Proto' AND '$(CheckNulls)' == 'true'">
  	<OtherFlags>$(OtherFlags) /langversion:preview</OtherFlags>
	  <OtherFlags>$(OtherFlags) /checknulls</OtherFlags>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)' != 'Proto' AND '$(CheckNulls)' != 'true'">
  	<OtherFlags>$(OtherFlags) /langversion:preview</OtherFlags>
    <!-- 3271: warning nullness annotations being ignored -->
    <NoWarn>$(NoWarn);3271</NoWarn>
    <DefineConstants>$(DefineConstants);NO_CHECKNULLS</DefineConstants>
  </PropertyGroup>

  <Choose>
    <When Condition=" '$(TargetFrameworkIdentifier)' == '.NETFramework' ">
      <PropertyGroup>
        <DefineConstants Condition="'$(MonoPackaging)' == 'true'">$(DefineConstants);CROSS_PLATFORM_COMPILER</DefineConstants>
      </PropertyGroup>
    </When>
    <Otherwise>
      <PropertyGroup>
        <DefineConstants>$(DefineConstants);NETSTANDARD</DefineConstants>
        <DefineConstants>$(DefineConstants);FX_NO_WINFORMS</DefineConstants>
        <OtherFlags>$(OtherFlags) --simpleresolution</OtherFlags>
      </PropertyGroup>
    </Otherwise>
  </Choose>

</Project>
