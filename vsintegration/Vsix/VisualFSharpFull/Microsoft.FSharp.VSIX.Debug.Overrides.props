<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) Microsoft Corporation.  All Rights Reserved.  See License.txt in the project root for license information. -->
<!--
  F# Debug VSIX Compiler Override Props File
  
  HOW TO USE THE LOCAL COMPILER WHEN DEBUGGING:
  
  OPTION 1 (Recommended): Set FSharpCompilerPath environment variable before launching VS
    - Windows: set FSharpCompilerPath=C:/path/to/fsharp/artifacts/bin/fsc/Debug/net472/
    - Then launch VS or use F5 from command line
  
  OPTION 2: Import this file in your test project's Directory.Build.props
    <Import Project="[VSIX_PATH]/Microsoft.FSharp.VSIX.Debug.Overrides.props" 
            Condition="Exists('[VSIX_PATH]/Microsoft.FSharp.VSIX.Debug.Overrides.props')" />
    
  VERIFICATION:
    - Build output should show: "[F# Debug VSIX] Using custom F# compiler from: ..."
    - Or use MSBuild /v:d and search for FSharpCompilerPath
-->
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  
  <PropertyGroup>
    <_FSharpDebugVsixPropsDir>$(MSBuildThisFileDirectory)</_FSharpDebugVsixPropsDir>
    <_FSharpDebugVsixToolsPath>$(_FSharpDebugVsixPropsDir)Tools\</_FSharpDebugVsixToolsPath>
    
    <!-- Override FSharpCompilerPath only if not already set and compiler exists -->
    <FSharpCompilerPath Condition="'$(FSharpCompilerPath)' == '' and Exists('$(_FSharpDebugVsixToolsPath)fscAnyCpu.exe')">$(_FSharpDebugVsixToolsPath)</FSharpCompilerPath>
  </PropertyGroup>
  
  <Target Name="WarnAboutDebugVsixCompiler" BeforeTargets="BeforeBuild" Condition="'$(FSharpCompilerPath)' == '$(_FSharpDebugVsixToolsPath)'">
    <Warning Text="[F# Debug VSIX] Using custom F# compiler from: $(FSharpCompilerPath)" />
  </Target>

</Project>
