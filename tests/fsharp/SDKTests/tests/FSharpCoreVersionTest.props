<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Import Project="$(FSharpRepositoryPath)\eng\Versions.props" />
  
  <!-- Read TFM from centralized source -->
  <PropertyGroup>
    <FSharpNetCoreProductDefaultTargetFramework>$([System.IO.File]::ReadAllText('$(FSharpRepositoryPath)\eng\productTfm.txt').Trim())</FSharpNetCoreProductDefaultTargetFramework>
    <FSharpNetCoreProductMajorVersion>$([System.Text.RegularExpressions.Regex]::Replace('$(FSharpNetCoreProductDefaultTargetFramework)', '^net(\d+)\.0$', '$1'))</FSharpNetCoreProductMajorVersion>
  </PropertyGroup>

  <PropertyGroup>
    <TargetFramework Condition="'$(TargetFramework)' == ''">$(FSharpNetCoreProductDefaultTargetFramework)</TargetFramework>
    <_TargetFrameworkVersionWithoutV>$(FSharpNetCoreProductMajorVersion).0</_TargetFrameworkVersionWithoutV>
    <TargetFrameworkIdentifier>.NETCoreApp</TargetFrameworkIdentifier>
    <Configuration Condition="'$(Configuration)' == ''">Release</Configuration>
    <TargetsDirectory>$(FSharpRepositoryPath)\artifacts\bin\FSharpSuite.Tests\$(Configuration)\$(TARGETFRAMEWORK)</TargetsDirectory>
    <Platform Condition="'$(Platform)' == ''">AnyCPU</Platform>
    <OutputPath>$(MSBuildThisFileDirectory)</OutputPath>
  </PropertyGroup>

  <!-- Override SDK version BEFORE import -->
  <PropertyGroup Condition="'$(TestFSCorePackageVersion)' != ''">
    <FSCorePackageVersion>$(TestFSCorePackageVersion)</FSCorePackageVersion>
    <FSCorePackageVersionSet>true</FSCorePackageVersionSet>
  </PropertyGroup>

  <Import Project="$(TargetsDirectory)\Microsoft.FSharp.NetSdk.props" />

</Project>
