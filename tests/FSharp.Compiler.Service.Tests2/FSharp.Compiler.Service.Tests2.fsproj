<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFrameworks>net7.0</TargetFrameworks>
    <!-- Workaround to get rid of:
        error NU1505: Duplicate 'PackageDownload' items found.
        Remove the duplicate items or use the Update functionality to ensure a consistent restore behavior.
        The duplicate 'PackageDownload' items are:
          Microsoft.NETCore.App.Host.win-x64 [6.0.2], Microsoft.NETCore.App.Host.win-x64 [6.0.2], Microsoft.NETCore.App.Host.win-x64 [6.0.2], Microsoft.NETCore.App.Host.win-x64 [6.0.2].
    -->
    <NoWarn>$(NoWarn);NU1505</NoWarn>
    <NoWarn>$(NoWarn);44;75;</NoWarn>
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <GenerateProgramFile>false</GenerateProgramFile>
    <DisableImplicitFSharpCoreReference>true</DisableImplicitFSharpCoreReference>
    <UnitTestType>nunit</UnitTestType>
    <RootNamespace>FSharp.Compiler.Service.Tests</RootNamespace>
  </PropertyGroup>

  <ItemGroup>
    <Compile Include="..\service\FsUnit.fs">
      <Link>FsUnit.fs</Link>
    </Compile>
    <Compile Include="..\service\Common.fs">
      <Link>Common.fs</Link>
    </Compile>
    <Compile Include="ASTVisit.fs" />
    <Compile Include="TestASTVisit.fs" />
    <Compile Include="DepResolving.fs" />
    <Compile Include="RunCompiler.fs" />
    <None Include="Big.fs">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <Content Include="Docs.md" />
    <Compile Include="Program.fs" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Dotnet.ProjInfo" Version="0.37.0" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.3.2" />
    <!-- Force a newer Newtonsoft.Json version to avoid conflicts. -->
    <PackageReference Include="Newtonsoft.Json" Version="$(NewtonsoftJsonVersion)" />
    <PackageReference Include="Buildalyzer" Version="4.1.2" />
    <ProjectReference Include="..\..\src\Compiler\FSharp.Compiler.Service.fsproj" />
    <ProjectReference Include="..\..\src\fsc\fscProject\fsc.fsproj" />
    <ProjectReference Include="..\..\tests\FSharp.Test.Utilities\FSharp.Test.Utilities.fsproj" />
  </ItemGroup>

</Project>
